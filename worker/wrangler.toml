name = "ai-dictionary-proxy"
main = "src/worker.js"
compatibility_date = "2024-12-01"

# Deploy: npx wrangler deploy
# Set secrets:
#   npx wrangler secret put GITHUB_TOKEN
#   npx wrangler secret put REPO_ID
#   npx wrangler secret put DISCUSSION_CATEGORY_ID
#   npx wrangler secret put PROXY_SECRET  (optional, for admin endpoints)
#
# The GITHUB_TOKEN needs `public_repo` scope (issues) and
# `write:discussion` scope (for creating discussions/comments).
# Create one at: https://github.com/settings/tokens
# with scopes: public_repo, write:discussion
#
# To get REPO_ID and DISCUSSION_CATEGORY_ID, run:
#   gh api repos/donjguido/ai-dictionary --jq '.node_id'
#   curl -s -H "Authorization: bearer $(gh auth token)" -H "Content-Type: application/json" \
#     -d '{"query":"{ repository(owner:\"donjguido\",name:\"ai-dictionary\") { discussionCategories(first:10) { nodes { id name } } } }"}' \
#     https://api.github.com/graphql

[vars]
GITHUB_OWNER = "donjguido"
GITHUB_REPO = "ai-dictionary"
